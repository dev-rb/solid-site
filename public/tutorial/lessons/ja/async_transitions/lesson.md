`Suspense` を使うと、データのロード中にフォールバックコンテンツを表示できます。これは最初のローディングには最適ですが、その後のナビゲーションでは、スケルトン状態にフォールバックすると UX が悪化することがよくあります。

そこで、`useTransition` を利用することで、フォールバックの状態に戻るのを回避できます。これは、ラッパーと保留中のインジケーターを提供します。ラッパーはすべてのダウンストリームの更新をトランザクションに入れ、すべての非同期イベントが完了するまでコミットしません。

つまり、制御フローがサスペンドしている時、現在のブランチを表示し続ける一方で、次のブランチは画面外にレンダリングされるのです。既存の境界の下にある Resource の読み取りは、それをトランジションに追加します。ただし、新しくネストした `Suspense` コンポーネントは、表示される前にロードが完了していない場合には「フォールバック」を表示します。

この例では、コンテンツが非表示になってローディングのプレースホルダーに戻ってしまうことが分かります。それでは、`App` コンポーネントにトランジションを追加してみましょう。まず、`updateTab` 関数を置き換えてみましょう。

```js
const [pending, start] = useTransition();
const updateTab = (index) => () => start(() => setTab(index));
```

`useTransition`は、保留中の Signal インジケーターとトランジションを開始するメソッドを返します。このメソッドは、更新の際に使用します。

この保留中の Signal を使って、UI にインジケーターを表示する必要があります。タブコンテナの div に pending クラスを追加しましょう:

```js
<div class="tab" classList={{ pending: pending() }}>
```

これで、タブの切り替えがよりスムーズになるはずです。
